/* ═══════════════════════════════════════════════════════════════
   blog.css — 1:1 GitHub Dark markdown-body styling
   Colors extracted from github.com dark theme (2024/2025)
   ═══════════════════════════════════════════════════════════════ */

/* ── GitHub Dark Color Palette ────────────────────────────────── */
:root {
  --gh-bg:                #0d1117;
  --gh-bg-secondary:      #161b22;
  --gh-bg-tertiary:       #21262d;
  --gh-fg:                #e6edf3;
  --gh-fg-muted:          #848d97;
  --gh-fg-subtle:         #6e7681;
  --gh-border:            #30363d;
  --gh-border-muted:      #21262d;
  --gh-link:              #2f81f7;
  --gh-link-hover:        #58a6ff;
  --gh-accent:            #1f6feb;
  --gh-code-bg:           rgba(110,118,129,0.4);
  --gh-code-block-bg:     #161b22;
  --gh-font-body:         -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
  --gh-font-mono:         ui-monospace, 'SFMono-Regular', 'SF Mono', 'Menlo', 'Consolas', 'Liberation Mono', monospace;
  --gh-note:              #2f81f7;
  --gh-tip:               #3fb950;
  --gh-important:         #a371f7;
  --gh-warning:           #d29922;
  --gh-caution:           #f85149;
}


/* ═══════════════════════════════════════════════════════════════
   BLOG LIST PAGE (preserved from original design)
   ═══════════════════════════════════════════════════════════════ */
.blog-list {
  animation: fadeIn var(--durationSlow) var(--curveDecelerateMid) both;
}
.blog-list-header {
  display: flex;
  align-items: baseline;
  gap: var(--spacingHorizontalM);
  margin-bottom: var(--spacingVerticalXL);
}
.blog-list-header h2 { margin: 0; }
.blog-count { color: var(--colorNeutralForeground4); }

.blog-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: var(--spacingVerticalL);
}

.blog-card {
  display: flex;
  flex-direction: column;
  text-decoration: none;
  color: inherit;
  overflow: hidden;
  padding: 0;
  cursor: pointer;
  transition:
    background   var(--durationNormal) var(--curveEasyEase),
    box-shadow   var(--durationNormal) var(--curveEasyEase),
    border-color var(--durationNormal) var(--curveEasyEase),
    transform    var(--durationNormal) var(--curveEasyEase);
}
.blog-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow16);
  border-color: var(--colorBrandStroke1);
}
.blog-card:hover .blog-card-title { color: var(--colorBrandForeground1); }
.blog-card:active { transform: translateY(0); box-shadow: var(--shadow4); }
.blog-card-cover {
  height: 160px;
  background-size: cover;
  background-position: center;
  border-bottom: var(--strokeWidthThin) solid var(--colorNeutralStroke2);
}
.blog-card-body {
  display: flex;
  flex-direction: column;
  gap: var(--spacingVerticalS);
  padding: var(--spacingVerticalL) var(--spacingHorizontalL);
  flex: 1;
}
.blog-card-title {
  margin: 0;
  font-size: var(--fontSizeBase400);
  font-weight: var(--fontWeightSemibold);
  line-height: var(--lineHeightBase400);
  color: var(--colorNeutralForeground1);
  transition: color var(--durationFast) var(--curveEasyEase);
}
.blog-card-desc {
  margin: 0;
  font-size: var(--fontSizeBase300);
  line-height: var(--lineHeightBase300);
  color: var(--colorNeutralForeground3);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.blog-card-meta {
  display: flex; align-items: center; gap: var(--spacingHorizontalS);
  margin-top: auto; padding-top: var(--spacingVerticalS);
  font-size: var(--fontSizeBase200); color: var(--colorNeutralForeground4);
}
.blog-card-tags { display: flex; gap: var(--spacingHorizontalXS); flex-wrap: wrap; }
.blog-tag { font-size: var(--fontSizeBase100) !important; padding: 1px 6px !important; }

.blog-empty { text-align: center; padding: var(--spacingVerticalXXL) 0; }
.blog-empty h2 { margin-bottom: var(--spacingVerticalM); }
.blog-not-found {
  text-align: center; padding: var(--spacingVerticalXXL) 0;
  display: flex; flex-direction: column; align-items: center; gap: var(--spacingVerticalM);
}
.blog-not-found h1 { font-size: var(--fontSizeHero1000); color: var(--colorNeutralForeground4); margin: 0; }


/* ═══════════════════════════════════════════════════════════════
   BLOG ARTICLE WRAPPER
   ═══════════════════════════════════════════════════════════════ */
.blog-article {
  max-width: 844px;
  margin: 0 auto;
  animation: slideUp var(--durationSlow) var(--curveDecelerateMid) both;
}
.blog-back-link {
  display: inline-flex; align-items: center; gap: 4px;
  color: var(--gh-link); text-decoration: none;
  font-size: 14px; font-weight: 500;
  padding: 4px 0; margin-bottom: 16px;
  transition: color 80ms ease;
}
.blog-back-link:hover { color: var(--gh-link-hover); text-decoration: underline; }

.blog-article-header { margin-bottom: 16px; }
.blog-article-title {
  margin: 0 0 8px 0;
  font-size: 32px; font-weight: 600; line-height: 1.25;
  color: var(--gh-fg);
}
.blog-article-meta {
  display: flex; align-items: center; gap: 12px;
  font-size: 12px; color: var(--gh-fg-muted);
}
.blog-article-tags { display: flex; gap: 4px; flex-wrap: wrap; }
.blog-article-desc {
  margin: 12px 0 0 0;
  font-size: 16px; line-height: 1.5; color: var(--gh-fg-muted); font-style: italic;
}


/* ═══════════════════════════════════════════════════════════════
   MARKDOWN BODY — GitHub Dark 1:1
   ═══════════════════════════════════════════════════════════════ */
.markdown-body {
  font-family: var(--gh-font-body);
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
  color: var(--gh-fg);
}

/* ── Headings ─────────────────────────────────────────────────── */
.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
  color: var(--gh-fg);
}
.markdown-body h1 { font-size: 2em; padding-bottom: 0.3em; border-bottom: 1px solid var(--gh-border); }
.markdown-body h2 { font-size: 1.5em; padding-bottom: 0.3em; border-bottom: 1px solid var(--gh-border); }
.markdown-body h3 { font-size: 1.25em; }
.markdown-body h4 { font-size: 1em; }
.markdown-body h5 { font-size: 0.875em; }
.markdown-body h6 { font-size: 0.85em; color: var(--gh-fg-muted); }

/* ── Paragraph ────────────────────────────────────────────────── */
.markdown-body p {
  margin-top: 0;
  margin-bottom: 16px;
}

/* ── Links ────────────────────────────────────────────────────── */
.markdown-body a {
  color: var(--gh-link);
  text-decoration: none;
}
.markdown-body a:hover {
  text-decoration: underline;
}

/* ── Strong / Em ──────────────────────────────────────────────── */
.markdown-body strong { font-weight: 600; }
.markdown-body em     { font-style: italic; }

/* ── Lists ────────────────────────────────────────────────────── */
.markdown-body ul,
.markdown-body ol {
  margin-top: 0;
  margin-bottom: 16px;
  padding-left: 2em;
}
.markdown-body ul { list-style-type: disc; }
.markdown-body ol { list-style-type: decimal; }
.markdown-body li {
  margin-top: 0.25em;
}
.markdown-body li + li {
  margin-top: 0.25em;
}
.markdown-body li > p {
  margin-top: 16px;
}
.markdown-body li > ul,
.markdown-body li > ol {
  margin-top: 0;
  margin-bottom: 0;
}

/* ── Task List (GFM) ─────────────────────────────────────────── */
.markdown-body .contains-task-list {
  list-style: none;
  padding-left: 0;
}
.markdown-body .task-list-item {
  position: relative;
  padding-left: 1.75em;
}
.markdown-body .task-list-item input[type="checkbox"] {
  position: absolute;
  left: 0;
  top: 0.35em;
  margin: 0;
  accent-color: var(--gh-link);
}

/* ── Blockquote ───────────────────────────────────────────────── */
.markdown-body blockquote {
  margin: 0 0 16px 0;
  padding: 0 1em;
  color: var(--gh-fg-muted);
  border-left: 0.25em solid var(--gh-border);
}
.markdown-body blockquote > :first-child { margin-top: 0; }
.markdown-body blockquote > :last-child  { margin-bottom: 0; }

/* ── Horizontal Rule ──────────────────────────────────────────── */
.markdown-body hr {
  height: 0.25em;
  padding: 0;
  margin: 24px 0;
  background-color: var(--gh-border);
  border: 0;
  border-radius: 2px;
}

/* ── Inline Code ──────────────────────────────────────────────── */
.markdown-body code,
.markdown-body tt {
  font-family: var(--gh-font-mono);
  font-size: 85%;
  padding: 0.2em 0.4em;
  margin: 0;
  background-color: var(--gh-code-bg);
  border-radius: 6px;
  color: var(--gh-fg);
  white-space: break-spaces;
}

/* ── Code Block ───────────────────────────────────────────────── */
.markdown-body pre {
  /* standalone pre without header (fallback) */
  font-family: var(--gh-font-mono);
  font-size: 13px;
  line-height: 1.5;
  background-color: var(--gh-code-block-bg);
  border: 1px solid var(--gh-border);
  border-radius: 8px;
  padding: 14px 16px;
  overflow: auto;
  margin-top: 0;
  margin-bottom: 16px;
  word-wrap: normal;
}
.markdown-body pre code,
.markdown-body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
  border-radius: 0;
  font-size: 100%;
  color: var(--gh-fg);
  white-space: pre;
}

/* ── Code Block Container (header + pre) ──────────────────────── */
.blog-code-block {
  position: relative;
  margin-bottom: 16px;
  background-color: var(--gh-code-block-bg);
  border: 1px solid var(--gh-border);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
  transition: box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);
}
.blog-code-block:hover {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.16);
}
.blog-code-block pre {
  margin: 0;
  border: 0;
  border-radius: 0;
  background: transparent;
  padding: 14px 16px;
  border-top: 1px solid var(--gh-border);
}

/* ── Code Block Header ────────────────────────────────────────── */
.blog-code-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: linear-gradient(
    180deg,
    var(--gh-bg-secondary) 0%,
    rgba(22, 27, 34, 0.5) 100%
  );
  border-bottom: 1px solid var(--gh-border);
  min-height: 44px;
  gap: 12px;
}
.blog-code-label {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1 0 auto;
}
.blog-code-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  opacity: 0.9;
  filter: brightness(0.95);
  border-radius: 0;
}
.blog-code-language {
  font-family: var(--gh-font-mono);
  font-size: 11px;
  font-weight: 600;
  color: var(--gh-fg-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.85;
}
.blog-code-copy {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  height: 28px;
  padding: 0 10px;
  background-color: transparent;
  border: 1px solid var(--gh-border);
  border-radius: 4px;
  color: var(--gh-fg-muted);
  font-size: 11px;
  font-family: var(--gh-font-body);
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  user-select: none;
}
.blog-code-copy:hover {
  background-color: var(--gh-border);
  color: var(--gh-fg);
  border-color: var(--gh-fg-subtle);
  transform: translateY(-1px);
}
.blog-code-copy:active {
  background-color: rgba(110, 118, 129, 0.2);
  transform: translateY(0);
}
.blog-code-copy svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

/* ── Image ────────────────────────────────────────────────────── */
.markdown-body img {
  max-width: 100%;
  height: auto;
  border-radius: 6px;
  border-style: none;
  background-color: var(--gh-bg);
}

/* ── Table (GFM) ──────────────────────────────────────────────── */
.markdown-body table {
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto;
  border-spacing: 0;
  border-collapse: collapse;
  margin-top: 0;
  margin-bottom: 16px;
}
.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid var(--gh-border);
}
.markdown-body table th {
  font-weight: 600;
  background-color: var(--gh-bg-secondary);
}
.markdown-body table tr {
  background-color: var(--gh-bg);
  border-top: 1px solid var(--gh-border-muted);
}
.markdown-body table tr:nth-child(2n) {
  background-color: var(--gh-bg-secondary);
}

/* ── Definition List ──────────────────────────────────────────── */
.markdown-body dl        { padding: 0; }
.markdown-body dl dt     { padding: 0; margin-top: 16px; font-weight: 600; font-style: italic; font-size: 1em; }
.markdown-body dl dd     { padding: 0 16px; margin-bottom: 16px; }

/* ── Footnotes (GFM) ─────────────────────────────────────────── */
.markdown-body .footnotes {
  font-size: 12px;
  color: var(--gh-fg-muted);
  border-top: 1px solid var(--gh-border);
  margin-top: 32px;
  padding-top: 16px;
}
.markdown-body .footnotes ol { padding-left: 16px; }
.markdown-body sup a {
  color: var(--gh-link);
  text-decoration: none;
  font-size: 85%;
}

/* ── Strikethrough (GFM) ──────────────────────────────────────── */
.markdown-body del { text-decoration: line-through; }

/* ── Keyboard Key ─────────────────────────────────────────────── */
.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font-family: var(--gh-font-mono);
  font-size: 11px;
  line-height: 10px;
  color: var(--gh-fg);
  vertical-align: middle;
  background-color: var(--gh-bg-secondary);
  border: 1px solid var(--gh-border);
  border-bottom-color: var(--gh-fg-subtle);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 var(--gh-fg-subtle);
}

/* ── Details / Summary (collapsible) ──────────────────────────── */
.markdown-body details {
  margin-bottom: 16px;
}
.markdown-body details summary {
  cursor: pointer;
  font-weight: 600;
  padding: 8px 0;
  color: var(--gh-fg);
  list-style: disclosure-closed;
}
.markdown-body details[open] summary {
  margin-bottom: 8px;
  list-style: disclosure-open;
}

/* ── Sub / Sup ────────────────────────────────────────────────── */
.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sub { bottom: -0.25em; }
.markdown-body sup { top: -0.5em; }


/* ═══════════════════════════════════════════════════════════════
   GFM ALERTS / CALLOUTS  (> [!NOTE] etc.)
   ═══════════════════════════════════════════════════════════════ */
.markdown-body .markdown-alert {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid;
  color: var(--gh-fg);
}
.markdown-body .markdown-alert > :first-child { margin-top: 0; }
.markdown-body .markdown-alert > :last-child  { margin-bottom: 0; }

.markdown-body .markdown-alert .markdown-alert-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  margin-bottom: 4px;
}
.markdown-body .markdown-alert .markdown-alert-title svg {
  fill: currentColor;
  flex-shrink: 0;
}

/* Note */
.markdown-body .markdown-alert-note {
  border-left-color: var(--gh-note);
}
.markdown-body .markdown-alert-note .markdown-alert-title {
  color: var(--gh-note);
}

/* Tip */
.markdown-body .markdown-alert-tip {
  border-left-color: var(--gh-tip);
}
.markdown-body .markdown-alert-tip .markdown-alert-title {
  color: var(--gh-tip);
}

/* Important */
.markdown-body .markdown-alert-important {
  border-left-color: var(--gh-important);
}
.markdown-body .markdown-alert-important .markdown-alert-title {
  color: var(--gh-important);
}

/* Warning */
.markdown-body .markdown-alert-warning {
  border-left-color: var(--gh-warning);
}
.markdown-body .markdown-alert-warning .markdown-alert-title {
  color: var(--gh-warning);
}

/* Caution */
.markdown-body .markdown-alert-caution {
  border-left-color: var(--gh-caution);
}
.markdown-body .markdown-alert-caution .markdown-alert-title {
  color: var(--gh-caution);
}


/* ═══════════════════════════════════════════════════════════════
   rehype-callouts — .callout structure (fallback for alerts)
   ═══════════════════════════════════════════════════════════════ */
.markdown-body .callout {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--gh-border);
  border-radius: 0;
  color: var(--gh-fg);
}
.markdown-body .callout > :first-child { margin-top: 0; }
.markdown-body .callout > :last-child  { margin-bottom: 0; }

.markdown-body .callout .callout-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  margin-bottom: 4px;
}
.markdown-body .callout .callout-title-icon svg {
  fill: currentColor;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}
.markdown-body .callout .callout-content > :first-child { margin-top: 0; }
.markdown-body .callout .callout-content > :last-child  { margin-bottom: 0; }

/* Note */
.markdown-body .callout[data-callout="note"] {
  border-left-color: var(--gh-note);
}
.markdown-body .callout[data-callout="note"] .callout-title {
  color: var(--gh-note);
}

/* Tip */
.markdown-body .callout[data-callout="tip"] {
  border-left-color: var(--gh-tip);
}
.markdown-body .callout[data-callout="tip"] .callout-title {
  color: var(--gh-tip);
}

/* Important */
.markdown-body .callout[data-callout="important"] {
  border-left-color: var(--gh-important);
}
.markdown-body .callout[data-callout="important"] .callout-title {
  color: var(--gh-important);
}

/* Warning */
.markdown-body .callout[data-callout="warning"] {
  border-left-color: var(--gh-warning);
}
.markdown-body .callout[data-callout="warning"] .callout-title {
  color: var(--gh-warning);
}

/* Caution / Danger */
.markdown-body .callout[data-callout="caution"],
.markdown-body .callout[data-callout="danger"] {
  border-left-color: var(--gh-caution);
}
.markdown-body .callout[data-callout="caution"] .callout-title,
.markdown-body .callout[data-callout="danger"] .callout-title {
  color: var(--gh-caution);
}


/* ═══════════════════════════════════════════════════════════════
   FORM ELEMENTS inside markdown
   ═══════════════════════════════════════════════════════════════ */
.markdown-body input[type="text"],
.markdown-body input[type="email"],
.markdown-body input[type="url"],
.markdown-body textarea,
.markdown-body select {
  font-family: var(--gh-font-body);
  font-size: 14px;
  line-height: 20px;
  padding: 5px 12px;
  background-color: var(--gh-bg);
  border: 1px solid var(--gh-border);
  border-radius: 6px;
  color: var(--gh-fg);
  outline: none;
  transition: border-color 80ms ease, box-shadow 80ms ease;
  vertical-align: middle;
}
.markdown-body input[type="text"]:focus,
.markdown-body input[type="email"]:focus,
.markdown-body input[type="url"]:focus,
.markdown-body textarea:focus,
.markdown-body select:focus {
  border-color: var(--gh-link);
  box-shadow: 0 0 0 3px rgba(47,129,247,0.3);
}
.markdown-body textarea {
  min-height: 100px;
  resize: vertical;
}

/* ── Scrollbar (inside code blocks) ───────────────────────────── */
.markdown-body pre::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.markdown-body pre::-webkit-scrollbar-track {
  background: transparent;
}
.markdown-body pre::-webkit-scrollbar-thumb {
  background: var(--gh-border);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
  cursor: pointer;
}
.markdown-body pre::-webkit-scrollbar-thumb:hover {
  background: var(--gh-fg-subtle);
  background-clip: padding-box;
  border: 2px solid transparent;
}

/* ── Misc spacing ─────────────────────────────────────────────── */
.markdown-body > *:first-child { margin-top: 0 !important; }
.markdown-body > *:last-child  { margin-bottom: 0 !important; }


/* ═══════════════════════════════════════════════════════════════
   rehype-pretty-code — shiki GitHub Dark overrides
   ═══════════════════════════════════════════════════════════════ */

/* Figure wrapper emitted by rehype-pretty-code */
.markdown-body figure[data-rehype-pretty-code-figure] {
  margin: 0 0 16px 0;
}

/* Override pre inside figure */
.markdown-body figure[data-rehype-pretty-code-figure] pre {
  margin: 0;
  background-color: transparent !important;
  border: none;
  border-radius: 0;
  padding: 14px 16px;
  overflow: auto;
  scroll-behavior: smooth;
}

/* Inline code highlighted by shiki */
.markdown-body code[data-theme] {
  padding: 0.2em 0.4em;
  background-color: var(--gh-code-bg);
  border-radius: 4px;
  color: var(--gh-fg);
}

/* Code inside pre (block) — reset inline styles */
.markdown-body pre code[data-theme],
.markdown-body pre code {
  padding: 0;
  background: transparent !important;
  border: none;
  border-radius: 0;
  white-space: pre;
  color: inherit;
}

/* Lines with proper spacing */
.markdown-body pre code [data-line] {
  display: block;
  padding: 0 0;
  min-height: 1.5em;
}

/* Line numbers (if enabled) */
.markdown-body code[data-line-numbers] {
  counter-reset: line;
}
.markdown-body code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  display: inline-block;
  width: 2.5rem;
  margin-right: 1.5rem;
  text-align: right;
  color: var(--gh-fg-muted);
  user-select: none;
}

/* Highlighted lines */
.markdown-body [data-highlighted-line] {
  background-color: rgba(56, 139, 253, 0.1);
  border-left: 3px solid rgba(56, 139, 253, 0.5);
  margin-left: -16px;
  margin-right: -16px;
  padding-left: 13px;
  padding-right: 16px;
}

/* Highlighted words / chars */
.markdown-body [data-highlighted-chars] {
  background-color: rgba(56, 139, 253, 0.2);
  border-radius: 3px;
  padding: 2px 3px;
  box-decoration-break: clone;
}

/* Figure title (filename) */
.markdown-body figure[data-rehype-pretty-code-figure] figcaption[data-rehype-pretty-code-title] {
  display: none;
  /* title styling moved to server-side or alternative handling */
}
.markdown-body figure[data-rehype-pretty-code-figure] figcaption[data-rehype-pretty-code-title] + pre {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}
